---

- name: "configuration play." 
  hosts: web
  user: ubuntu
  gather_facts: false
  vars:
    - ansible_python_interpreter: /usr/bin/python3
    - ansible_host_key_checking: false
    - ansible_stdout_callback: yaml

#  pre_tasks:
#    - name: "wait 600 seconds for target connection to become reachable/usable."
#      pause: 
#        seconds: 600

#    - name: "install python for Ansible."
#      gather_facts: false
#      hosts: all
#      remote_user: root
#      tasks:
#        changed_when: false
#        failed_when: false

#    - name: "Check for Python"
#      raw: "test -e /usr/bin/python"
#      register: check_python

#    - name: "Install Python"
#      raw: "apt -y update && apt install -y python-minimal"
#      when: "check_python.rc != 0"

  roles: 
    - configure-server
  